(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[43432],{

/***/ 290120:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(258551);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var q0=__c.q0;var L=__c.L;
var eKc=async function(a,b){return a.mta(b,async()=>{if(a.ZXa==null)throw Error("Scene document resources are not supported");const c=await a.ZXa.Dr({id:b,version:1},void 0),d={id:c.id,files:{W_a:c.content.url,DIa:c.Rc?.url}};(0,__c.Yb)(()=>{a.scenes.set(d.id,d)});return d})},hKc=function(a,b){if(a.xh.Zhb&&b instanceof fKc)return new gKc(a.xh.Zhb,b);throw Error("GltfResource needs GltfResource");},jKc=function(a){return iKc?new fKc(a):new fKc(a,{environment_sdr:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_sdr.png",environment_gain:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_gain.png"})},
kKc=function(a,b,c){let d=b-1,e=0,f=c-1,g=0;for(let h=0;h<c;h++)for(let k=0;k<b;k++)a[3+(h*b+k)*4]!==0&&(d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h));a=g-f+1;return{left:d,top:c-(f+a),width:e-d+1,height:a}},lKc=function(a,b,c){const d=a.store.KE?a.xh.canvas:a.store.xE;if(d){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");a.store.KE&&a.render(!1);c.width=b;c.height=b;e.drawImage(d,0,0,b,b)}},mKc=function(a,b){a.store.container=b;b.contains(a.xh.canvas)||
b.appendChild(a.xh.canvas)},nKc=function(a){if(a.store.Le){const b=requestAnimationFrame(()=>nKc(a));a.store.Ffa=b;a.render(a.store.zYa)}},qKc=function({uka:a,xh:b}){const c=new oKc;return new pKc(c,a,b)},rKc=function(a){var b=__c.y(a.store.container,"Missing container"),c=a.lg.MZ;b.style.width=2E3*a.lg.da+"px";b.style.height=2E3*a.lg.da+"px";b.style.left=`-${c.left*a.lg.da}px`;b.style.top=`-${c.top*a.lg.da}px`;b.style.position="absolute";c=new Image;{var d=a.lg;b=a.r_(b);const e=d.store.KE?d.xh.canvas:
d.store.xE;e?(d.store.KE&&(N7(d.xh,b,b),d.render(!1)),d=e.toDataURL("image/png")):d=""}c.src=d;a.store.$M=c},tKc=function(a){var b=__c.y(a.store.container,"Missing container");b.style.position="init";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";const c=document.createElement("canvas");var d=a.lg;b=a.r_(b);if(d.store.isInitialized){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");var f=b/2E3,g=d.k8();c.width=f*g.width;c.height=f*g.height;const h=
sKc(d.xh);N7(d.xh,b,b);d.render(!1);e.drawImage(d.xh.canvas,g.left*f,g.top*f,g.width*f,g.height*f,0,0,g.width*f,g.height*f);N7(d.xh,h.width,h.height)}else if(d.store.xE){e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");f=d.store.fga;g=d.store.zS/2E3;b/=2E3;c.width=Math.round(b*f.width);c.height=Math.round(b*f.height);e.drawImage(d.store.xE,f.left*g,f.top*g,f.width*g,f.height*g,0,0,c.width,c.height)}d=new Image;d.src=c.toDataURL("image/png");a.store.$M=d;c.width=1;c.height=1},
uKc=function(a){const b=a.Xm;a=__c.AN.create({...__c.QD,image:{...__c.oEb,media:{...__c.FEb,id:a.pJ,version:1},Ab:void 0}});return O7(b,{fill:a})},xKc=function({Ajb:a,ukb:b,pkb:c,Lha:d,Jzb:e,Xm:f,gra:g}){switch(d){case 1:return O7(c,{});case 3:return O7(vKc,{v9:e||""});case 0:return O7(b,{});case 2:return O7(uKc,{Xm:f,pJ:g||""});case 4:return O7(a,{});case 5:return O7(wKc,{});default:throw new __c.A(d);}},EKc=function({Kp:a,sf:b,Xm:c,Rz:d,xh:e,Upa:f,exports:g,kia:h}){const k=new yKc,l=new zKc(k,a,
b,d,e,f,h),m=AKc(a),n=BKc(a),p=()=>O7("div",{children:"Error"});return CKc(()=>{P7(()=>{l.initialize();return()=>{l.destroy()}},[]);P7(()=>{l.I2&&l.ai&&g.gmb&&g.gmb()});return O7(DKc,{Id:l.Id,children:O7(xKc,{Lha:l.Lha,Jzb:l.v9,selected:l.ai,gra:l.gra,Xm:c,pkb:n,ukb:m,Ajb:p})})})},HKc=function(a){return FKc(({data:b,Ae:{Xm:c},pi:{sf:d}})=>{const e=GKc(()=>EKc({Kp:b,sf:d,Xm:c,...a}),[b,d,c]);return O7("div",{className:"N73IPQ",children:O7(e,{})})})},JKc=function(a,b,c){a=a.startSpan("load_resource",
c);return IKc(a,b)},IKc=function(a,b){return(typeof b==="function"?b():b).catch(c=>{a.setStatus("error");throw c;}).finally(()=>{a.end()})},N7=function(a,b,c){a.canvas.width=b;a.canvas.height=c},KKc=function(a,b){a.kba=a.kba.filter(c=>c!==b)},sKc=function(a){return{width:a.canvas.width,height:a.canvas.height}},MKc=async function(a){a.sQ||(a.sQ=Q7());try{const [{default:b,WebGlRenderer:c},{default:d}]=await Promise.all([__webpack_require__.me(19779),__webpack_require__.me(104993)]);await b({path:d});
a.gQa=c}catch(b){throw a.E4=void 0,Error("Failed to initialize renderer",{cause:b});}try{a.yQ=LKc(a)}catch(b){a.J.info(`Unable to initialize WebGL context error: ${b}`),R7(()=>{a.Sua=!0})}},Q7=function(){const a=document.createElement("canvas");a.width=1E3;a.height=1E3;a.style.width="100%";a.style.visibility="visible";return a},LKc=function(a,b=0){if(b>5)throw Error("Unable to recreate context");const c=NKc(a);a.yQ=new (__c.y(a.gQa))(c);a.yQ.onContextLost=()=>{a.J.info("WebGL context lost for scene widget");
a.yQ=void 0;a.E4=void 0;a.MFa=()=>{const d=a.canvas;a.sQ=Q7();a.gQa&&LKc(a,b+1);a.kba.forEach(e=>e(d));a.MFa=void 0}};return a.yQ},NKc=function(a){a=a.canvas;let b;const c=e=>{b=e.statusMessage??"Unknown"};a.addEventListener("webglcontextcreationerror",c);const d=a.getContext("webgl");a.removeEventListener("webglcontextcreationerror",c);if(d!=null)return d;throw Error(b);};
__c.Gs.prototype.mta=__c.fa(9,function(a,b){const c=this.ni.get(__c.Es(a));if(c!=null&&c.R$a!=null){const e=this.YX.get(c);if(e!=null)return Promise.resolve({...c,element:e})}const d=__c.Es(a);if(a=this.pending.get(d))return a;c!=null&&c.R$a!=null&&(b=async()=>{const e=await __c.Fs(this,c);return{...c,element:e}});b=b().finally(()=>this.pending.delete(d));this.pending.set(d,b);return b});
__c.Hs.prototype.mta=__c.fa(8,function(a,b){var c=this.scenes.get(a);if(c)return Promise.resolve(c);if(c=this.pending.get(a))return c;b=b().finally(()=>this.pending.delete(a));this.pending.set(a,b);return b});var OKc=__webpack_require__(19779),gKc=OKc.GltfRenderer,fKc=OKc.GltfResource;var S7=__webpack_require__(186901),T7=S7.EW,R7=S7.h5,U7=S7.mJ,V7=S7.sH,W7=S7.XI;var PKc=__webpack_require__(322594),O7=PKc.jsx,QKc=PKc.jsxs;var X7=__webpack_require__(205482),FKc=X7.memo,P7=X7.useEffect,GKc=X7.useMemo,RKc=X7.useRef,SKc=X7.useState;var CKc=__webpack_require__(721226).PA;var iKc=__c.wc("1aab289f",!1),TKc=class{constructor(a){this.xh=a}};var UKc=class{static G(a){L(a,{selected:V7.ref,Ssa:V7.ref,Rsa:V7.ref,E9:V7.ref,kBb:V7.ref})}constructor(a){this.lg=a;this.selected=(UKc.G(this),!1);this.Rsa=this.Ssa=!1;this.E9=0;this.kBb=!1}};var pKc=class{static G(a){L(a,{initialize:W7,Iub:W7,mMa:W7,Acb:W7,dispose:W7,k8:W7,Fka:W7,Rdb:W7})}async initialize(a){this.store.isInitialized||this.store.Id||(this.store.Id=!0,a=jKc(a),this.store.vka=a,await a.load(),a===this.store.vka&&(this.store.KE=hKc(this.uka,a),this.xh.kba.push(this.Fka),this.render(!0),R7(()=>{this.store.isInitialized=!0;this.store.Id=!1})))}Iub(a,b,c=!0){const d=this.k8();this.store.MZ=d;a=Math.round(Math.min(a.width*2E3/d.width,2E3));N7(this.xh,a,a);this.store.zS=a;this.store.da=
b;this.store.zYa=c;this.Rdb()}get zS(){return this.store.zS}get MZ(){return this.store.MZ}mMa(){this.store.Le=!1;this.store.Ffa!=null&&(cancelAnimationFrame(this.store.Ffa),this.store.Ffa=void 0)}Acb(a){this.store.OR=a}async dispose(){this.mMa();if(this.isInitialized&&this.store.container?.contains(this.xh.canvas)){this.store.fga=this.k8();var a=document.createElement("canvas");lKc(this,this.store.zS,a);this.store.xE=a}this.store.KE?.dispose();this.store.KE=void 0;this.store.isInitialized=!1;KKc(this.xh,
this.Fka);this.store.Id=!1;a=this.store.vka;this.store.vka=void 0;await a?.load();a?.dispose()}k8(){if(this.store.gga&&this.store.OR===this.store.gga?.WIb)return this.store.gga.ha;var a=sKc(this.xh);N7(this.xh,2E3,2E3);this.render(!1);const b=this.xh.getImageData();N7(this.xh,a.width,a.height);a=this.Ewb(b.data,b.width,b.height);this.store.gga={WIb:this.store.OR,ha:a};return a}get isInitialized(){return this.store.isInitialized}get Id(){return this.store.Id}get Le(){return this.store.Le}get da(){return this.store.da}Rdb(){this.mMa();
this.store.Le=!0;nKc(this)}render(a){this.store.KE?.render({distance:1,rotationPhi:this.store.OR.rotation.x,rotationTheta:this.store.OR.rotation.y,enableGrid:a})}constructor(a,b,c,d=kKc){this.store=a;this.uka=b;this.xh=c;this.Ewb=d;this.Fka=(pKc.G(this),e=>{R7(()=>{const f=this.store.vka,g=this.store.container;g&&this.store.isInitialized&&f&&(g.contains(e)&&g.removeChild(e),mKc(this,g),this.store.KE?.dispose(),this.store.KE=void 0,this.store.KE=hKc(this.uka,f),this.xh.kba.push(this.Fka),this.store.isInitialized=
!0)})})}};var oKc=class{static G(a){L(a,{Le:V7.ref,OR:V7.ref,Ffa:V7.ref,xE:V7.ref,fga:V7.ref,gga:V7.ref,isInitialized:V7.ref,Id:V7.ref,da:V7.ref,MZ:V7.ref})}constructor(){this.container=(oKc.G(this),void 0);this.zYa=this.Le=!1;this.OR={rotation:{x:0,y:0,z:0}};this.fga={left:0,top:0,width:1,height:1};this.Id=this.isInitialized=!1;this.da=1;this.MZ={left:0,top:0,width:1,height:1};this.zS=0}};var VKc=({UAb:a})=>QKc("div",{className:"Wfem7A",children:[O7("div",{className:"CSoSRg"}),O7("div",{className:"__J59g",style:{width:a?"100%":"init",height:a?"init":"100%",aspectRatio:"1"},children:O7("div",{className:"tEhdig"})})]}),DKc=({children:a,Id:b})=>{const c=RKc(null),[d,e]=SKc(!1);P7(()=>{c.current&&e(c.current.clientWidth>=c.current.clientHeight)},[c]);return b?O7("div",{ref:c,className:"uDEnGQ",children:QKc("div",{className:"E8BDLQ",children:[O7("div",{className:"II7r4Q",children:a}),O7(VKc,
{UAb:d})]})}):a};var WKc=({UFb:a,TFb:b})=>{const c=RKc(null);P7(()=>{const d=c.current;c.current&&a(c.current);return()=>{d&&b()}},[c,a,b]);return O7("div",{ref:c,style:{display:"block",position:"absolute"}})};var XKc=class{get lg(){return this.local.lg}constructor(a){this.local=a;this.ayb=b=>{const c=this.lg.MZ;b.style.width=2E3*this.lg.da+"px";b.style.height=2E3*this.lg.da+"px";b.style.left=`-${c.left*this.lg.da}px`;b.style.top=`-${c.top*this.lg.da}px`;mKc(this.lg,b)};this.$xb=()=>{var b=this.lg;if(b.isInitialized&&b.store.container?.contains(b.xh.canvas)){b.store.fga=b.k8();const c=document.createElement("canvas");lKc(b,b.store.zS,c);b.store.xE=c}b.store.container?.removeChild(b.xh.canvas);b.store.container=
void 0}}};var BKc=({local:a})=>{const b=new XKc(a);return()=>O7(WKc,{UFb:b.ayb,TFb:b.$xb})};var YKc=({$M:a,tGb:b,onDispose:c})=>{const d=RKc(null);P7(()=>{d.current&&b(d.current);return()=>c()},[d,b,c]);P7(()=>{d.current&&a&&(a.style.width="100%",a.style.height="100%",d.current.firstChild&&d.current.removeChild(d.current.firstChild),d.current.appendChild(a))},[d,a]);return O7("div",{ref:d,style:{width:"100%",height:"100%"}})};var ZKc=__c.wc("75810be2",!1),$Kc=class{static G(a){L(a,{initialize:W7.bound,dispose:W7.bound,OXa:W7})}initialize(a){ZKc||(this.store.container=a,this.store.PXa=U7(()=>[this.lg.store.OR,this.lg.Le],this.dyb,{fireImmediately:!1}),this.store.MXa=U7(()=>this.local.Rsa,this.byb,{fireImmediately:!0}))}dispose(){this.OXa();this.store.PXa?.();this.store.PXa=void 0;this.store.MXa?.();this.store.MXa=void 0}get $M(){return this.store.$M}r_(a){a=a.getBoundingClientRect();return Math.max(a.width,a.height)>100?
this.lg.zS:300}get lg(){return this.local.lg}OXa(){this.store.$M=void 0}constructor(a,b){this.store=a;this.local=b;this.dyb=($Kc.G(this),()=>{this.lg.Le||(this.local.Rsa?rKc(this):tKc(this))});this.byb=()=>{this.local.Rsa?rKc(this):tKc(this)}}};var aLc=class{static G(a){L(a,{$M:V7.ref})}constructor(){this.container=(aLc.G(this),void 0)}};var AKc=({local:a})=>{const b=new aLc,c=new $Kc(b,a);return CKc(()=>O7(YKc,{tGb:c.initialize,onDispose:c.dispose,$M:c.$M}))};var wKc=()=>O7("div",{className:"_7SJjPA"});var vKc=({v9:a})=>O7("img",{src:a,style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}});var zKc=class{static G(a){L(a,{initialize:W7,destroy:W7,Lha:T7,Id:T7,isError:T7,v9:T7,LB:T7,ai:T7,j0a:W7,o0a:W7,p0a:W7})}async initialize(){this.store.Bsb=U7(()=>this.LB,this.j0a,{fireImmediately:!0});const a=await eKc(this.Rz,this.Kp.D.scene.id);R7(()=>{this.store.scene=a})}destroy(){this.LB&&this.Kp.local.E9--;this.Kp.local.E9===0&&this.lg.dispose();this.store.Bsb?.();this.store.Oza?.();this.store.Nza?.();this.store.QXa?.()}get Lha(){return this.yEa&&this.LB&&!this.lg.Le||this.LB&&this.yEa&&!this.ai||
!this.LB&&this.yEa?0:this.VAb&&this.lg.Le?1:this.gra?2:this.v9?3:this.isError?4:5}get Id(){return this.LB&&this.ai&&!this.lg.isInitialized}get isError(){return!!this.store.scene&&!this.store.scene.files.DIa}get v9(){return this.store.scene?.files.DIa}get yEa(){return this.Kp.local.Ssa}get gra(){return this.Kp.D.config.ref.snapshot?.id}get LB(){return!this.kia&&this.sf===30&&!this.xh.M2a}get I2(){return this.store.I2}get ai(){return this.Kp.local.selected}get VAb(){return this.LB&&this.ai&&this.lg.isInitialized}get lg(){return this.Kp.local.lg}get D(){return this.Kp.D}constructor(a,
b,c,d,e,f,g){this.store=a;this.Kp=b;this.sf=c;this.Rz=d;this.xh=e;this.Upa=f;this.kia=g;this.oyb=(zKc.G(this),()=>{if(!this.Kp.local.Ssa){var h=this.lg;h.store.xE&&(h.store.xE.width=1,h.store.xE.height=1,h.store.xE=void 0)}});this.j0a=(h,k)=>{this.store.Oza?.();this.store.Nza?.();this.store.QXa?.();k&&this.Kp.local.E9--;this.LB?(this.Kp.local.E9++,this.store.Oza=U7(()=>({selected:this.ai,scene:this.store.scene}),({selected:l,scene:m})=>this.o0a(l,m),{fireImmediately:!0}),this.store.Nza=U7(()=>[this.Kp.D.config.ref.rotationPhi,
this.Kp.D.config.ref.rotationTheta],this.hyb,{fireImmediately:!0}),this.store.QXa=U7(()=>[this.Kp.local.Ssa],this.oyb,{fireImmediately:!1})):this.store.Oza=U7(()=>({selected:this.ai}),({selected:l})=>this.p0a(l),{fireImmediately:!0})};this.o0a=async(h,k)=>{if(k!=null)if(!h)this.lg.dispose();else if(!this.lg.Id){var l=__c.y(k.files.W_a);await this.xh.aTb;this.xh.M2a||(h=this.Upa.startSpan("select"),await JKc(this.Upa,async()=>{await this.lg.initialize(l)},h),h.end())}};this.p0a=h=>{this.store.I2=navigator!=
null&&!!navigator.userAgent.match(/iphone|ipad/gi);h||(this.store.I2=!1)};this.hyb=()=>{this.lg.Le||this.lg.Acb({rotation:{x:this.Kp.D.config.ref.rotationPhi,y:this.Kp.D.config.ref.rotationTheta,z:0}})}}};var yKc=class{static G(a){L(a,{scene:V7.ref,I2:V7.ref})}constructor(){this.Nza=(yKc.G(this),void 0);this.I2=!1}};var bLc=class{startSpan(a,b){a=`scene.${a}`;return b?this.ab.startSpan(a,b):this.ab.ii(a,{Mq:{name:`editor.${a}`,performance:{xJ:!0}}})}constructor(a){this.ab=a}};var cLc=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi),dLc=class{static G(a){L(a,{Sua:V7.ref})}get M2a(){return this.Sua}get aTb(){this.MFa&&this.MFa();this.E4||(this.E4=MKc(this));return this.E4}get canvas(){this.sQ||(this.sQ=Q7());return this.sQ}get Zhb(){return this.yQ}getImageData(){__c.w(this.yQ!=null,"WebGlRenderer is not initialized");return this.yQ.readPixels()}constructor(a){this.J=a;this.sQ=(dLc.G(this),void 0);this.kba=[];this.Sua=!1;cLc||(this.sQ=Q7(),this.E4=MKc(this))}};var eLc=__c.RZ()(()=>({RYb(a,b,c){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:void 0,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},P:{width:b,height:c}}},SYb(a,b,c,d){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:b,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},P:{width:c,height:d}}}}));var fLc=__c.b_({D:__c.a_({scene:q0.Gm(1,"SceneRef"),config:q0.Cwa(2,{snapshot:q0.sHb(1,"MediaRef"),rotationPhi:q0.aYa(2,{min:0,max:6.284}),rotationTheta:q0.aYa(3,{min:-1.571,max:1.571})})})});var gLc;gLc=__c.DZ()(({hi:a,SL:b})=>{var c=b.ab;b=b.J.hg("scene_widget_rendering");c=new bLc(c);const d=new dLc(b),e=new TKc(d),f=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi);b={kia:f};a=HKc({Rz:a.Rz,xh:d,Upa:c,exports:b,kia:f});return{metadata:{type:"scene",name:__c.K("6XoKOg"),QV:g=>g.scene.id},p6:()=>{const g=qKc({uka:e,xh:d});return new UKc(g)},D:__c.CZ(a),exports:b}});__c.s_={};__c.s_.DVb=UKc;__c.s_.mh=eLc;__c.s_.Io=gLc;__c.s_.nh=fLc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/4f98721f2915e28d.js.map